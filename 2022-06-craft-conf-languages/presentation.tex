\documentclass[aspectratio=169]{beamer}
\mode<presentation>

\usepackage{calc}
\usepackage{relsize}
\usepackage{graphicx}
\usepackage[group-separator={,}]{siunitx}
\usepackage[overlay,absolute]{textpos}

\graphicspath{{../images}}

\usepackage{fontspec}
\setsansfont{Helvetica Neue Light}[
    BoldFont={Helvetica Neue Bold},
    BoldItalicFont={Helvetica Neue Bold Italic},
    ItalicFont={Helvetica Neue Light Italic}
]
\setmonofont{Iosevka Term}
\newfontface\helvreg{Helvetica Neue}

\title{My favorite programming languages}
\subtitle{and three others}
\author{Douglas Creager\\\textsmaller[1]{\href{https://dcreager.net/}{@dcreager}}\vspace{-0.5em}}
\institute{\includegraphics[width=2.5em]{github-mark.pdf}\vspace{2em}}
\date{Craft Conf\\\textsmaller[1]{June 2, 2022 – Budapest}}

\newlength{\titlewidth}
\newcommand{\flattitle}[3]{
    \settowidth{\titlewidth}{\textbf{\LARGE #3}}
    \begin{textblock*}{\titlewidth}(#1,#2)
        \textbf{\LARGE #3}
    \end{textblock*}
}
\newcommand{\shadowedtitle}[3]{
    \settowidth{\titlewidth}{\textbf{\LARGE #3}}
    \addtolength{\titlewidth}{0.5mm}
    \begin{textblock*}{\titlewidth}(#1+0.4mm,#2+0.4mm)
        \textbf{\LARGE #3}
    \end{textblock*}
    \begin{textblock*}{\titlewidth}(#1,#2)
        \textbf{\textcolor{white}{\LARGE #3}}
    \end{textblock*}
}

\setbeamercolor{title}{fg=black}
\setbeamerfont{title}{series=\bfseries,size=\larger[1]}
\setbeamercolor{frametitle}{fg=black}
\setbeamerfont{frametitle}{series=\bfseries}

\setbeamerfont{institute}{size=\normalsize}

\setbeamertemplate{navigation symbols}{}

% Picture credits

\makeatletter
\def\picturecredits{}
\newcommand{\picturecredit}[4]{\picturecreditraw{#1}{#2}{#3}{\url{#4}}}
\newcommand{\picturecreditraw}[4]{
    \protected@xappto\picturecredits{
        \textsmaller[3]{Slide \theframenumber} &
        \textsmaller[2]{#1, “#2”} \vspace*{-0.4em} \newline
        \textsmaller[3]{#3, #4} \\
    }
}
\makeatother

% Program listings

\usepackage[outputdir=.build]{minted}
\usemintedstyle{tango}
\setminted{autogobble,fontsize=\relscale{0.8},frame=single,framesep=6pt,escapeinside=??,tabsize=4}

\newcommand<>{\languageicon}[2][145mm,5mm]{%
    \begin{textblock*}{4mm}(#1)
        \only#3{\includegraphics[width=4mm]{languages/#2.png}}
    \end{textblock*}%
}

\newcommand<>{\showlisting}[6][]{%
    \begin{textblock*}{#4}(#2,#3)
    \languageicon#7[#2 + #4 - 4mm - 2mm, #3 + 3mm]{#5}
    \begin{onlyenv}#7
    \inputminted[#1]{#5}{#6}
    \end{onlyenv}
    \end{textblock*}
}

\begin{document}

\begin{frame}
    \titlepage
\end{frame}


\section{Introduction}

\begin{frame}
    %\begin{textblock*}{160mm}(0mm,-15mm)
    %    \only<1>{
    %    \picturecreditraw
    %      {Pieter Bruegel the Elder}
    %      {The Tower of Babel (Rotterdam)}
    %      {Public domain}
    %      {\href{https://commons.wikimedia.org/wiki/File:Pieter_Bruegel_the_Elder_-_The_Tower_of_Babel_(Rotterdam)_-_Google_Art_Project_-_edited.jpg}{Wikimedia Commons}}
    %    }
    %    \includegraphics[width=160mm]{tower-of-babel-bruegel.jpg}
    %\end{textblock*}
    \begin{textblock*}{160mm}(5mm,5mm)
        \only<1>{
        \picturecredit
          {Meister der Weltenchronik}
          {Weltchronik in Versen, Szene: Der Turmbau zu Babel}
          {Public domain}
          {https://commons.wikimedia.org/wiki/File:Meister_der_Weltenchronik_001.jpg}
        }
        \includegraphics[height=80mm]{tower-of-babel-weltenchronik.png}
    \end{textblock*}

    \begin{textblock*}{15mm}( 72mm,-6mm)
        \only<3- >{\includegraphics[width=12mm]{languages/apl.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}( 87mm,-6mm)
        \only<3- >{\includegraphics[width=12mm]{languages/java.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}(102mm,-6mm)
        \only<3- >{\includegraphics[width=12mm]{languages/csharp.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}(117mm,-6mm)
        \only<3- >{\includegraphics[width=12mm]{languages/perl.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}(132mm,-6mm)
        \only<3- >{\includegraphics[width=12mm]{languages/typescript.png}}
    \end{textblock*}

    \begin{textblock*}{15mm}( 72mm, 9mm)
        \only<3- >{\includegraphics[width=12mm]{languages/prolog.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}( 87mm, 9mm)
        \only<3- >{\includegraphics[width=12mm]{languages/ats.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}(102mm, 9mm)
        \only<3- >{\includegraphics[width=12mm]{languages/nim.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}(117mm, 9mm)
        \only<3- >{\includegraphics[width=12mm]{languages/javascript.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}(132mm, 9mm)
        \only<3- >{\includegraphics[width=12mm]{languages/c.png}}
    \end{textblock*}

    \begin{textblock*}{15mm}( 72mm,24mm)
        \only<3- >{\includegraphics[width=12mm]{languages/clu.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}( 87mm,24mm)
        \only<3- >{\includegraphics[width=12mm]{languages/bash.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}(102mm,24mm)
        \only<3- >{\includegraphics[width=12mm]{languages/elixir.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}(117mm,24mm)
        \only<3- >{\includegraphics[width=12mm]{languages/crystal.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}(132mm,24mm)
        \only<3- >{\includegraphics[width=12mm]{languages/racket.png}}
    \end{textblock*}

    \begin{textblock*}{15mm}( 72mm,39mm)
        \only<3- >{\includegraphics[width=12mm]{languages/python.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}( 87mm,39mm)
        \only<2- >{\includegraphics[width=12mm]{languages/fortran.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}(102mm,39mm)
        \only<3- >{\includegraphics[width=12mm]{languages/dart.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}(117mm,39mm)
        \only<2- >{\includegraphics[width=12mm]{languages/cobol.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}(132mm,39mm)
        \only<3- >{\includegraphics[width=12mm]{languages/kotlin.png}}
    \end{textblock*}

    \begin{textblock*}{15mm}( 72mm,54mm)
        \only<3- >{\includegraphics[width=12mm]{languages/rust.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}( 87mm,54mm)
        \only<3- >{\includegraphics[width=12mm]{languages/cpp.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}(102mm,54mm)
        \only<3- >{\includegraphics[width=12mm]{languages/turbo-pascal.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}(117mm,54mm)
        \only<3- >{\includegraphics[width=12mm]{languages/julia.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}(132mm,54mm)
        \only<3- >{\includegraphics[width=12mm]{languages/haskell.png}}
    \end{textblock*}

    \begin{textblock*}{15mm}( 72mm,69mm)
        \only<3- >{\includegraphics[width=12mm]{languages/go.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}( 87mm,69mm)
        \only<3- >{\includegraphics[width=12mm]{languages/swanson.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}(102mm,69mm)
        \only<3- >{\includegraphics[width=12mm]{languages/erlang.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}(117mm,69mm)
        \only<3- >{\includegraphics[width=12mm]{languages/zig.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}(132mm,69mm)
        \only<3- >{\includegraphics[width=12mm]{languages/php.png}}
    \end{textblock*}

    \begin{textblock*}{15mm}( 72mm,84mm)
        \only<3- >{\includegraphics[width=12mm]{languages/swift.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}( 87mm,84mm)
        \only<3- >{\includegraphics[width=12mm]{languages/ruby.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}(102mm,84mm)
        \only<3- >{\includegraphics[width=12mm]{languages/scala.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}(117mm,84mm)
        \only<3- >{\includegraphics[width=12mm]{languages/clojure.png}}
    \end{textblock*}
    \begin{textblock*}{15mm}(132mm,84mm)
        \only<3- >{\includegraphics[width=12mm]{languages/r.png}}
    \end{textblock*}

    \begin{textblock*}{15mm}(41mm,18mm)
        \only<4>{\picturecredit{ABC Television}{The \$10,000 Pyramid}{Public domain}{https://commons.wikimedia.org/wiki/File:Dick_Clark_$10000_Pyramid.JPG}}
        \only<4>{\includegraphics[width=20mm]{dick-clark-pyramid.jpg}}
    \end{textblock*}
    \begin{textblock*}{15mm}(38mm,46mm)
        \begin{onlyenv}<4>
            \begin{minipage}{26mm}
                \centering
                How many can you identify?
            \end{minipage}
        \end{onlyenv}
    \end{textblock*}
\end{frame}

\begin{frame}
    \begin{textblock*}{160mm}(0mm,-15mm)
        \picturecredit{Matjaž Mirt}{Tern/čigra}{CC-BY-2.0}{https://flic.kr/p/2kXydKp}
        \includegraphics[width=160mm]{one-tern.jpg}
    \end{textblock*}
\end{frame}

\begin{frame}
    \begin{textblock*}{160mm}(0mm,0mm)
        \picturecredit{Mark Gunn}{This just tern'ed into a swarm!}{CC-BY-2.0}{https://flic.kr/p/P11JH1}
        \includegraphics[width=160mm]{terns.jpg}
    \end{textblock*}
\end{frame}


\section{Repetition}

\begin{frame}
    \begin{textblock*}{160mm}(0mm,-15mm)
        \picturecredit{Dave Shafer}{Luzern mirror maze, Switzerland}{CC-BY-2.0}{https://flic.kr/p/5RQPx9}
        \includegraphics[width=160mm]{mirror-maze.jpg}
    \end{textblock*}
    \shadowedtitle{153mm - \titlewidth}{80mm}{Repetition}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Loops}

    \showlisting<1-2>[firstline=5,lastline=11]{80mm - 10em}{20mm}{20em}{go}{examples/factorial.go}

    \begin{textblock*}{13em}(80mm - 6.5em,52mm)
    \begin{onlyenv}<2- >
    \begin{center}
    $$ x! = 1 \times 2 \times \cdots \times x $$
    $$
        \begin{array}{r@{\;}c@{\;}r}
            1!  &=& 1 \\
            4!  &=& 24 \\
            10! &=& \num{3628800} \\
        \end{array}
    $$
    \end{center}
    \end{onlyenv}
    \end{textblock*}

    \showlisting<3>[lastline=8]{80mm - 6.5em}{20mm}{13em}{perl}{examples/factorial.pl}
    \showlisting<4>[lastline=5]{80mm - 7.5em}{20mm}{15em}{python}{examples/factorial.py}
    \showlisting<5>[lastline=7]{80mm - 11.5em}{20mm}{23em}{c}{examples/factorial.c}
    \showlisting<6>[lastline=7]{80mm - 11.5em}{20mm}{23em}{cpp}{examples/factorial.cc}
    \showlisting<7>[lastline=7]{80mm - 7.5em}{20mm}{15em}{rust}{examples/factorial.rs}
\end{frame}


\section{Handling failure}

\begin{frame}
    \begin{textblock*}{160mm}(0mm,0mm)
        \picturecredit{Blondinrikard Fröberg}{Fail}{CC-BY-2.0}{https://flic.kr/p/B9WA8y}
        \includegraphics[width=160mm]{blown-tire.jpg}
    \end{textblock*}
    \shadowedtitle{10mm}{5mm}{Handling failure}
\end{frame}


\section{Cleaning up}

\begin{frame}
    \begin{textblock*}{160mm}(0mm,-5mm)
        \picturecredit{Alan Levine}{King of the Trash Hill}{CC-BY-2.0}{https://flic.kr/p/eRjo3W}
        \includegraphics[width=160mm]{landfill.jpg}
    \end{textblock*}
    \shadowedtitle{133mm - \titlewidth}{5mm}{Cleaning up}
\end{frame}


\section{Concurrency}

\begin{frame}
    \begin{textblock*}{160mm}(0mm,-30mm)
        \picturecredit{Jim}{Duvel Assembly Line}{CC-BY-SA-2.0}{https://flic.kr/p/NpqGS}
        \includegraphics[width=160mm]{bottling-plant.jpg}
    \end{textblock*}
    \shadowedtitle{143mm - \titlewidth}{77mm}{Concurrency}
\end{frame}


\section{Conclusion}

\begin{frame}
    \begin{textblock*}{160mm}(0mm,-15mm)
        \picturecredit{Mark Gunn}{Time to tern in}{CC-BY-2.0}{https://flic.kr/p/NHDXRb}
        \includegraphics[width=160mm]{terns-resting.jpg}
    \end{textblock*}
\end{frame}


\begin{frame}[fragile]
    \frametitle{Fibonacci}
    \languageicon{python}
    \inputminted[lastline=7]{python}{examples/fibonacci.py}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Fibonacci}
    \languageicon{rust}
    \inputminted[lastline=7]{rust}{examples/fibonacci.rs}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Fibonacci}
    \languageicon{haskell}
    \inputminted[lastline=3]{haskell}{examples/fibonacci.hs}
\end{frame}


\begin{frame}[fragile]
    \frametitle{Downloading a file}
    \languageicon{python}
    \inputminted{python}{examples/download.py}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Downloading a file}
    \languageicon{javascript}
    \inputminted{javascript}{examples/download.js}
\end{frame}


\begin{frame}[t]
    \frametitle{Picture credits}
    \begin{tabular}{lp{0.75\textwidth}}
    \picturecredits
    \end{tabular}
\end{frame}

\end{document}
